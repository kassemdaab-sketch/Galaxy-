<script>
    // --- UPDATED PROXY LOGIC ---
    function launchUplink(url) {
        const container = document.getElementById('proxy-container');
        const frame = document.getElementById('proxy-frame');
        
        logMessage("INITIATING UPLINK: " + url);
        
        // Use a Proxy Bridge to fetch content
        // This wraps the URL so the browser thinks it's coming from a safe source
        const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;
        
        frame.src = proxyUrl; 
        container.style.display = 'flex';
    }

    function closeUplink() {
        document.getElementById('proxy-container').style.display = 'none';
        document.getElementById('proxy-frame').src = '';
        logMessage("UPLINK TERMINATED.");
    }

    // --- SEARCH LOGIC ---
    document.getElementById('search-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const query = document.getElementById('search-box').value;
        let targetUrl;

        if (query.includes('.') && !query.includes(' ')) {
            targetUrl = query.startsWith('http') ? query : 'https://' + query;
        } else {
            targetUrl = 'https://duckduckgo.com/?q=' + encodeURIComponent(query);
        }
        
        launchUplink(targetUrl);
    });

    // --- UI LOGIC ---
    function handleMouseMove(e) {
        document.body.style.setProperty('--mouse-x', e.clientX + 'px');
        document.body.style.setProperty('--mouse-y', e.clientY + 'px');
    }

    function logMessage(msg) {
        const lb = document.getElementById('system-logs');
        const div = document.createElement('div');
        div.innerText = `> [${new Date().toLocaleTimeString()}] ${msg}`;
        lb.prepend(div);
        if(lb.childNodes.length > 5) lb.lastChild.remove();
    }

    setInterval(() => {
        document.getElementById('neural-clock').innerText = new Date().toLocaleTimeString();
    }, 1000);

    function initStars() {
        const canvas = document.getElementById('stars-canvas');
        for(let i=0; i<80; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random()*3+'px';
            star.style.height = star.style.width;
            star.style.left = Math.random()*100+'vw';
            star.style.top = Math.random()*100+'vh';
            star.style.opacity = Math.random();
            canvas.appendChild(star);
        }
    }
    initStars();
    logMessage("SYSTEM READY: GALAXY_PRO_V2");
</script>
