<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Docs</title>
    <link rel="icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body { 
            margin: 0; background: #05010a; color: white; 
            font-family: 'JetBrains Mono', monospace; 
            display: flex; align-items: center; justify-content: center; height: 100vh;
        }
        .boot-screen { text-align: center; }
        .spinner { 
            width: 40px; height: 40px; border: 4px solid rgba(188, 19, 254, 0.1); 
            border-top: 4px solid #bc13fe; border-radius: 50%; 
            animation: spin 1s linear infinite; margin: 20px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        h1 { font-family: 'Orbitron'; letter-spacing: 5px; font-size: 1.5rem; }
        #manual-trigger { 
            display: none; padding: 10px 20px; background: #bc13fe; 
            border: none; color: white; cursor: pointer; font-family: 'Orbitron';
        }
    </style>
</head>
<body>

    <div class="boot-screen">
        <h1 id="status-text">INITIALIZING STEALTH...</h1>
        <div class="spinner" id="loader"></div>
        <button id="manual-trigger" onclick="deployGalaxy()">CLICK TO MANUALLY INITIALIZE</button>
        <p style="font-size: 0.7rem; color: #555; margin-top: 10px;">(Please allow pop-ups if prompted)</p>
    </div>

    <script>
        const decoys = [
            "https://classroom.google.com",
            "https://www.khanacademy.org",
            "https://canvas.instructure.com"
        ];

        // This runs the moment the page loads
        window.onload = function() {
            setTimeout(deployGalaxy, 1500);
        };

        function deployGalaxy() {
            const decoy = decoys[Math.floor(Math.random() * decoys.length)];
            
            // 1. Open the decoy window
            const win = window.open(decoy, '_blank');

            if (!win || win.closed || typeof win.closed === 'undefined') {
                // If the browser blocked the auto-popup, show the manual button
                document.getElementById('status-text').innerText = "STEALTH BLOCKED BY BROWSER";
                document.getElementById('loader').style.display = 'none';
                document.getElementById('manual-trigger').style.display = 'inline-block';
                return;
            }

            // 2. Hijack the window to about:blank
            win.location.replace("about:blank");

            // 3. Inject the Galaxy Interface into the new cloaked tab
            const checker = setInterval(() => {
                if (win.location.href === "about:blank") {
                    clearInterval(checker);
                    
                    const doc = win.document;
                    doc.title = "Google Docs";
                    const link = doc.createElement('link');
                    link.rel = 'icon';
                    link.href = 'https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico';
                    doc.head.appendChild(link);

                    // Injecting the actual Galaxy CSS and HTML content
                    doc.body.innerHTML = `
                        <div style="background:#05010a; color:white; height:100vh; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                            <h1 style="font-family:Orbitron; letter-spacing:10px;">GALAXY PRO</h1>
                            <input type="text" id="proxy-in" placeholder="Search or URL..." style="padding:15px; width:400px; border-radius:50px; border:1px solid #bc13fe; background:transparent; color:white; text-align:center;">
                            <div style="margin-top:20px;">
                                <button onclick="launch('https://sites.google.com/fcpsschools.net/galaxy-ulimate-gaming/games')" style="padding:10px 20px; background:#bc13fe; border:none; color:white; cursor:pointer;">GAMES</button>
                            </div>
                        </div>
                        <script>
                            function launch(url) {
                                document.body.innerHTML = '<iframe src="' + url + '" style="position:fixed; top:0; left:0; width:100%; height:100%; border:none;"></iframe>';
                            }
                            document.getElementById('proxy-in').addEventListener('keydown', (e) => {
                                if(e.key === 'Enter') {
                                    let val = e.target.value;
                                    let url = val.includes('.') ? (val.startsWith('http') ? val : 'https://'+val) : 'https://www.bing.com/search?q='+val;
                                    launch(url);
                                }
                            });
                        <\/script>
                    `;
                    
                    // 4. Redirect the original "trigger" tab to something safe
                    window.location.replace("https://google.com");
                }
            }, 100);
        }
    </script>
</body>
</html>
